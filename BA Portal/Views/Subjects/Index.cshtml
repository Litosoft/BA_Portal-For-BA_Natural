@model IEnumerable<BA_Portal.Models.Subject>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Clients</h2>

<p>
    @Html.ActionLink("New Patient", "Create")
</p>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            Age
        </th>
        <th>
            Gender
        </th>
        <th>
            @Html.DisplayNameFor(model => model.City)
        </th>
        <th>
            First Seen On
        </th>

        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @{ 
                DateTime now = DateTime.Today;
                int age = now.Year - item.DOB.Year;
                if (now < item.DOB.AddYears(age))
                {
                    age--;
                }
                @age
            }
        </td>
        <td>
            @if (item.Male == true)
            { @Html.DisplayNameFor(model => model.Male)}
            else if (item.Female == true)
            {@Html.DisplayNameFor(model => model.Female) }

        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @{
                string date = item.DateCreated.ToShortDateString();
                @date
            }


        </td>
        <td>
            @Html.ActionLink("Insurance Form(s)", "Edit", new { id = item.ID }) |
            @Html.ActionLink("Personal Information Form", "Details", new { id = item.ID }) |
            @Html.ActionLink("Soap Note(s)", "Delete", new { id = item.ID }) |
            @Html.ActionLink("Manage Client", "Delete", new { id = item.ID }) |
            @*
    @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
    @Html.ActionLink("Details", "Details", new { id=item.ID }) |
    @Html.ActionLink("Delete", "Delete", new { id=item.ID })
            *@
        </td>
    </tr>
}

</table>
